<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>پروفایل کاربر</title>
</head>
<body>
  <div id="app">در حال بارگذاری...</div>

  <script>
    const segments = window.location.pathname.split("/").filter(Boolean);
    const username = segments[1]?.toLowerCase();

    if (!username) {
      document.getElementById("app").innerHTML = "<h2>نام کاربر مشخص نیست</h2>";
    } else {
      const proxyUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent("https://litebase.ir/code/servers/accountroming.json");

      fetch(proxyUrl)
        .then(res => {
          if (!res.ok) {
            throw new Error("خطا در دریافت فایل JSON از پراکسی");
          }
          return res.json();
        })
        .then(data => {
          const users = {};
          for (const key in data) {
            users[key.toLowerCase()] = data[key];
          }

          const user = users[username];
          const app = document.getElementById("app");

          if (user) {
            app.innerHTML = `
              <h1>${user.name}</h1>
              <p>${user.bio}</p>
              <img src="${user.avatar}" width="150">
            `;
          } else {
            app.innerHTML = "<h2>کاربر پیدا نشد</h2>";
          }
        })
        .catch(err => {
          console.error("خطا:", err);
          document.getElementById("app").innerHTML = "<h2>مشکل در دریافت اطلاعات</h2>";
        });
    }
  </script>
</body>
</html>
